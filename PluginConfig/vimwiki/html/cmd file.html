<script type="text/javascript" src="scripts/shCore.js"></script>
<link type="text/css" rel="stylesheet" href="styles/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<script type="text/javascript" src="scripts/shBrushverilog.js"></script>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>cmd file</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<p>
CMD文件包含两大内容：
一、资源清单，或者说，系统中可用的存储器资源
TI规定，CMD文件的资源清单用关键字"MEMORY"作为标识，具体内容写在后面的大括号{}里面
MEMORY
{
</p>
<blockquote>
PAGE 0:
xxx     :   org = 0x1234,   length = 0x5678     /<strong>comment</strong>/
PAGE 1:
aaa     :   org = 0x1357,   length = 0x2468
</blockquote>
<p>
}
其中，MEMORY，PAGE n，org，length等都是关键字符，必不可少
PAGE n表示把可用的资源空间再划分成几个大块，最多允许分256块，大家习惯于把PAGE 0
作为程序空间，把PAGE 1作为数据空间
要特别注意以下几点：
1、必须在DSP芯片的空间分配的架构体系以内，分配所有的存储器。
2、每个小块的空间，必须是一片连续的区域。因为，编译器在使用这块区域的时
候，默认它是连续的，而且每个存储单元都是可用的。
3、同一空间下面，任何两个小块之间，不能有任何的相互覆盖和重叠。
4、用户所声明的空间划分情况，必须与用户电路板的实际情况相符合！
</p>

<p>
编写CMD文件，就是要搞清楚以下情况，并对编译器做出声明：
1、你的系统都有哪些存储器资源？
2、哪些存储器安排在程序空间，哪些在数据空间？
3、你的系统会产生哪些大“状况”和小“状况”？
4、哪些状况属于程序空间，哪些属于数据空间？
5、程序空间的“状况”如何安排在程序空间的资源里，数据空间的“状况”如何
安排在数据空间的资源里？
</p>

<p>
二、资源分配
SECTIONS  
{ 
.vectors    : &gt; VECS PAGE 0 
.text       : &gt; PROG PAGE 0 
.cinit      : &gt; PROG PAGE 0  
.bss        : &gt; SARAM PAGE 1  
.stack      : &gt; B0B1 PAGE 1  
.extdata    : &gt; ExtSRAM PAGE 1  
} 
未初始化块  数据空间
.bss        存放全局和静态变量
.ebss       长调用的.bss(超过了64K地址限制)
.stack      存放C语言的栈
.sysmem     存放C语言的堆
.eaysmem    长调用的.sysmem(超过了64K地址限制)
</p>

<p>
初始化块    程序空间
.text       可执行代码和常数，编译后生产的二进制指令代码段(program)
.vectors    中断服务程序的入口地址段
.switch     switch语句产生的常数表格(program/低64K数据空间)
.pint       Tables for global constrructors(C++)(program)
.cinit      存放对全局和静态变量的初始化常数值(program)
.const      全局和静态的const变量初始化值和字符串常数(data)
.econst     长.const(可定位到任何地方) (data)
</p>



















<p>
/**********************************************************************************************/ 
-stack 200h  /* #1 */
/**********************************************************************************************/ 
MEMORY  /* #2 */
{ 
PAGE 0 : 
VECS   : origin = 0000h , length = 0040h   /* 中断向量*/  /* #3 */
PROG   : origin = 0100h , length = 7F00h   /* 片上FLASH  <strong>/  /</strong> #4 */
PAGE 1 : 
B2    : origin = 0060h , length = 0020h   /* DARAM B2 块*/  /* #5 */
B0B1   : origin = 0200h , length = 0200h   /* DARAM B0 块*/  /* #6 */
SARAM  : origin = 0800h , length = 0800h   /* SARAM 块 <strong>/ /</strong> #7 */
ExtSRAM  : origin = 8000h , length = 8000h   /* 外部存储器 <strong>/ /</strong> #8 */
} 
/**********************************************************************************************/ 
SECTIONS  /* #9 */
{ 
.vectors : &gt; VECS PAGE 0 /* 中断向量表 <strong>/ /</strong> #10 */
.text : &gt; PROG PAGE 0 /* 代码*/  /* #11 */
.cinit : &gt; PROG PAGE 0  /* #12 */
.bss : &gt; SARAM PAGE 1  /* #13 */
.stack : &gt; B0B1 PAGE 1  /* #14 */
.extdata : &gt; ExtSRAM PAGE 1  /* #15 */ 
} 
/**********************************************************************************************/ 
</p>

</body>
</html>

